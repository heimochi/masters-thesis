"0","# --- Stratified Split for bpm Modeling ---"
"0","set.seed(123)"
"0",""
"0","# Create bins for stratification"
"0","full_dat <- full_dat %>%"
"0","  mutate(bpm_internalizing = cut("
"0","    bpm_y_scr_internal_t,"
"0","    breaks = c(-Inf, 65, 70, Inf),"
"0","    labels = c(""normal"", ""borderline"", ""clinical""),"
"0","    right = FALSE"
"0","  )) %>%"
"0","  mutate(bpm_internalizing = as.numeric(bpm_internalizing) - 1)"
"0",""
"0","# Split into train/calib/test (70/15/15)"
"0","train_index <- createDataPartition(full_dat$bpm_internalizing, p = 0.7, list = FALSE)"
"0","train_data <- full_dat[train_index, ]"
"0","remaining_data <- full_dat[-train_index, ]"
"0","test_index <- createDataPartition(remaining_data$bpm_internalizing, p = 0.5, list = FALSE)"
"0","calib_data <- remaining_data[-test_index, ]"
"0","test_data <- remaining_data[test_index, ]"
"0",""
"0",""
