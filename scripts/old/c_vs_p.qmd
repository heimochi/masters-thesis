---
title: "child vs parent"
author: "mochibear"
format: html
editor: visual
---

## Load
```{r}
############Parent reported KSADS OCD diagnosis 
p_ksads_diagnosis <- read.csv("/Users/maggieheimvik/Desktop/LCBC/Data/ABCD/OCD/all_ksads_diagnosis.csv")

# Filter to select only the specified columns
p_ksads_diagnosis <- p_ksads_diagnosis %>%
  select(
    src_subject_id,
    ksads_11_917_p
  )

####### Parent reported CBCL
p_cbcl <- read.csv("/Users/maggieheimvik/Desktop/LCBC/Data/ABCD/ocd/p_data.csv")

p_cbcl<- p_cbcl %>%
  select(src_subject_id, cbcl_scr_dsm5_anxdisord_t, cbcl_scr_dsm5_adhd_t, cbcl_scr_dsm5_depress_t, cbcl_scr_dsm5_somaticpr_t, cbcl_scr_dsm5_opposit_t, cbcl_scr_dsm5_conduct_t, cbcl_scr_syn_internal_t, cbcl_scr_syn_external_t, cbcl_scr_syn_totprob_t, cbcl_scr_07_ocd_t)

#Merge DSM diagnosis with OCD diagnosis
# Merge KSADS with CBCL DSM-5 data by src_subject_id
p_cbcl <- p_cbcl %>%
  inner_join(p_ksads_diagnosis, by = "src_subject_id")

```

# Child reported
```{r}
##### Child reported CBCL
c_bpm <- read.csv("/Users/maggieheimvik/Desktop/LCBC/Data/ABCD/core/mental-health/mh_y_bpm.csv")

c_bpm <- c_bpm %>%
   filter(eventname == "2_year_follow_up_y_arm_1") %>%
  select(
    src_subject_id,
    bpm_y_scr_attention_t,
    bpm_y_scr_internal_t,
    bpm_y_scr_external_t,
    bpm_y_scr_totalprob_t
  )

c_bpm <- c_bpm %>%
  inner_join(p_ksads_diagnosis, by = "src_subject_id")
```

```{r}

# Full dataset statistics for each T score category
full_sample_stats <- c_bpm %>%
  summarise(
    mean_attention_t = mean(bpm_y_scr_attention_t, na.rm = TRUE),
    sd_attention_t = sd(bpm_y_scr_attention_t, na.rm = TRUE),
    mean_internal_t = mean(bpm_y_scr_internal_t, na.rm = TRUE),
    sd_internal_t = sd(bpm_y_scr_internal_t, na.rm = TRUE),
    mean_external_t = mean(bpm_y_scr_external_t, na.rm = TRUE),
    sd_external_t = sd(bpm_y_scr_external_t, na.rm = TRUE),
    mean_totalprob_t = mean(bpm_y_scr_totalprob_t, na.rm = TRUE),
    sd_totalprob_t = sd(bpm_y_scr_totalprob_t, na.rm = TRUE)
  )

# Statistics for OCD present population
ocd_present_stats <- c_bpm %>%
  filter(ksads_11_917_p == 1) %>%
  summarise(
    mean_attention_t = mean(bpm_y_scr_attention_t, na.rm = TRUE),
    sd_attention_t = sd(bpm_y_scr_attention_t, na.rm = TRUE),
    mean_internal_t = mean(bpm_y_scr_internal_t, na.rm = TRUE),
    sd_internal_t = sd(bpm_y_scr_internal_t, na.rm = TRUE),
    mean_external_t = mean(bpm_y_scr_external_t, na.rm = TRUE),
    sd_external_t = sd(bpm_y_scr_external_t, na.rm = TRUE),
    mean_totalprob_t = mean(bpm_y_scr_totalprob_t, na.rm = TRUE),
    sd_totalprob_t = sd(bpm_y_scr_totalprob_t, na.rm = TRUE)
  )

# Statistics for OCD absent population
ocd_absent_stats <- c_bpm %>%
  filter(ksads_11_917_p == 0) %>%
  summarise(
    mean_attention_t = mean(bpm_y_scr_attention_t, na.rm = TRUE),
    sd_attention_t = sd(bpm_y_scr_attention_t, na.rm = TRUE),
    mean_internal_t = mean(bpm_y_scr_internal_t, na.rm = TRUE),
    sd_internal_t = sd(bpm_y_scr_internal_t, na.rm = TRUE),
    mean_external_t = mean(bpm_y_scr_external_t, na.rm = TRUE),
    sd_external_t = sd(bpm_y_scr_external_t, na.rm = TRUE),
    mean_totalprob_t = mean(bpm_y_scr_totalprob_t, na.rm = TRUE),
    sd_totalprob_t = sd(bpm_y_scr_totalprob_t, na.rm = TRUE)
  )

# Print summaries
print("Full Sample Statistics")
print(full_sample_stats)

print("OCD Present Statistics")
print(ocd_present_stats)

print("OCD Absent Statistics")
print(ocd_absent_stats)

```

# Teacher reported 
```{r}
##### Teacher reported CBCL
t_bpm <- read.csv("/Users/maggieheimvik/Desktop/LCBC/Data/ABCD/core/mental-health/mh_t_bpm.csv")

t_bpm <- t_bpm %>%
   filter(eventname == "2_year_follow_up_y_arm_1") %>%
  select(
    src_subject_id,
    bpm_t_scr_attention_t,
    bpm_t_scr_internal_t,
    bpm_t_scr_external_t,
    bpm_t_scr_totalprob_t
  )

t_bpm <- t_bpm %>%
  inner_join(p_ksads_diagnosis, by = "src_subject_id")
```

```{r}

# Full dataset statistics for each T score category
full_sample_stats <- t_bpm %>%
  summarise(
    mean_attention_t = mean(bpm_t_scr_attention_t, na.rm = TRUE),
    sd_attention_t = sd(bpm_t_scr_attention_t, na.rm = TRUE),
    mean_internal_t = mean(bpm_t_scr_internal_t, na.rm = TRUE),
    sd_internal_t = sd(bpm_t_scr_internal_t, na.rm = TRUE),
    mean_external_t = mean(bpm_t_scr_external_t, na.rm = TRUE),
    sd_external_t = sd(bpm_t_scr_external_t, na.rm = TRUE),
    mean_totalprob_t = mean(bpm_t_scr_totalprob_t, na.rm = TRUE),
    sd_totalprob_t = sd(bpm_t_scr_totalprob_t, na.rm = TRUE)
  )

# Statistics for OCD present population
ocd_present_stats <- t_bpm %>%
  filter(ksads_11_917_p == 1) %>%
  summarise(
    mean_attention_t = mean(bpm_t_scr_attention_t, na.rm = TRUE),
    sd_attention_t = sd(bpm_t_scr_attention_t, na.rm = TRUE),
    mean_internal_t = mean(bpm_t_scr_internal_t, na.rm = TRUE),
    sd_internal_t = sd(bpm_t_scr_internal_t, na.rm = TRUE),
    mean_external_t = mean(bpm_t_scr_external_t, na.rm = TRUE),
    sd_external_t = sd(bpm_t_scr_external_t, na.rm = TRUE),
    mean_totalprob_t = mean(bpm_t_scr_totalprob_t, na.rm = TRUE),
    sd_totalprob_t = sd(bpm_t_scr_totalprob_t, na.rm = TRUE)
  )

# Statistics for OCD absent population
ocd_absent_stats <- t_bpm %>%
  filter(ksads_11_917_p == 0) %>%
  summarise(
    mean_attention_t = mean(bpm_t_scr_attention_t, na.rm = TRUE),
    sd_attention_t = sd(bpm_t_scr_attention_t, na.rm = TRUE),
    mean_internal_t = mean(bpm_t_scr_internal_t, na.rm = TRUE),
    sd_internal_t = sd(bpm_t_scr_internal_t, na.rm = TRUE),
    mean_external_t = mean(bpm_t_scr_external_t, na.rm = TRUE),
    sd_external_t = sd(bpm_t_scr_external_t, na.rm = TRUE),
    mean_totalprob_t = mean(bpm_t_scr_totalprob_t, na.rm = TRUE),
    sd_totalprob_t = sd(bpm_t_scr_totalprob_t, na.rm = TRUE)
  )

# Print summaries
print("Full Sample Statistics")
print(full_sample_stats)

print("OCD Present Statistics")
print(ocd_present_stats)

print("OCD Absent Statistics")
print(ocd_absent_stats)

```
